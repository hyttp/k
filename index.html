<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CN Lab Programs (1–5)</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{font-family:Arial,Helvetica,sans-serif;background:#f4f6f8;padding:20px}
h1{text-align:center;color:#1f2937}
h2,h3{color:#111827;margin-top:30px}
button{padding:10px 18px;margin:8px;border:none;border-radius:6px;background:#2563eb;color:#fff;cursor:pointer;font-size:14px}
button:hover{background:#1d4ed8}
pre{background:#0f172a;color:#e5e7eb;padding:20px;border-radius:8px;overflow-x:auto;font-size:14px}
</style>
</head>
<body>

<h1>Computer Networks Lab Programs</h1>

<button onclick="document.getElementById('p1').scrollIntoView()">Program 1</button>
<button onclick="document.getElementById('p2').scrollIntoView()">Program 2</button>
<button onclick="document.getElementById('p3').scrollIntoView()">Program 3</button>
<button onclick="document.getElementById('p4').scrollIntoView()">Program 4</button>
<button onclick="document.getElementById('p5').scrollIntoView()">Program 5</button>

<section id="p1">
<h2>1. TCP/IP Socket Programming – File Transfer</h2>

<h3>client.c</h3>
<pre><code>
#include &lt;stdio.h&gt;
#include &lt;arpa/inet.h&gt;
#include &lt;unistd.h&gt;

int main() {
 int soc = socket(PF_INET, SOCK_STREAM, 0);
 if (soc < 0) return 1;

 struct sockaddr_in addr = {
  .sin_family = AF_INET,
  .sin_port = htons(7891),
  .sin_addr.s_addr = inet_addr("127.0.0.1")
 };

 if (connect(soc, (struct sockaddr *)&addr, sizeof(addr)) == 0) {
  printf("Connected to server\nEnter file name: ");
  char fname[50], buffer[1024];
  scanf("%s", fname);
  send(soc, fname, sizeof(fname), 0);
  printf("Response:\n");
  while (recv(soc, buffer, sizeof(buffer), 0) > 0)
   printf("%s", buffer);
 }
 close(soc);
 return 0;
}
</code></pre>

<h3>server.c</h3>
<pre><code>
#include &lt;stdio.h&gt;
#include &lt;arpa/inet.h&gt;
#include &lt;fcntl.h&gt;
#include &lt;unistd.h&gt;

int main() {
 int welcome = socket(PF_INET, SOCK_STREAM, 0);

 struct sockaddr_in addr = {
  .sin_family = AF_INET,
  .sin_port = htons(7891),
  .sin_addr.s_addr = inet_addr("127.0.0.1")
 };

 bind(welcome, (struct sockaddr*)&addr, sizeof(addr));
 listen(welcome, 5);

 int new_soc = accept(welcome, NULL, NULL);
 char fname[50], buffer[1024];
 recv(new_soc, fname, sizeof(fname), 0);

 int fd = open(fname, O_RDONLY);
 if (fd < 0)
  send(new_soc, "File not found\n", 15, 0);
 else {
  int n;
  while ((n = read(fd, buffer, sizeof(buffer))) > 0)
   send(new_soc, buffer, n, 0);
 }

 close(fd);
 close(new_soc);
 close(welcome);
 return 0;
}
</code></pre>
</section>

<section id="p2">
<h2>2. Data Link Layer Framing Methods</h2>

<h3>(a) Character Stuffing</h3>
<pre><code>
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
void character_stuffing(const char *input, char *output, char ch, int pos) {
 const char *dle = "dle";
 strcpy(output, "dlestx");
 int j = 6;
 for (int i = 0; input[i] != '\0'; i++) {
  if (i == pos - 1) {
   strcat(output + j, dle);
   output[j + 3] = ch;
   strcat(output + j + 4, dle);
   j += 7;
  } else if (!strncmp(&input[i], dle, 3)) {
   strcat(output + j, dle);
   j += 3;
  }
  output[j++] = input[i];
 }
 strcat(output + j, "dleetx");
}
int main() {
 char input[20], output[50], ch;
 int pos;
 printf("Enter string: ");
 scanf("%s", input);
 printf("Enter stuffing position and character: ");
 scanf("%d %c", &pos, &ch);
 character_stuffing(input, output, ch, pos);
 printf("Frame after stuffing: %s\n", output);
 return 0;
}
</code></pre>

<h3>(b) Bit Stuffing</h3>
<pre><code>
#include &lt;stdio.h&gt;
void bit_stuffing(int *input, int n) {
 int output[50], j = 0, count = 0;
 for (int i = 0; i < n; i++) {
  output[j++] = input[i];
  if (input[i] == 1) {
   count++;
   if (count == 5) {
    output[j++] = 0;
    count = 0;
   }
  } else count = 0;
 }
 printf("After stuffing: ");
 for (int i = 0; i < j; i++) printf("%d", output[i]);
 printf("\n");
}
int main() {
 int n, input[20];
 printf("Enter frame length and bits: ");
 scanf("%d", &n);
 for (int i = 0; i < n; i++) scanf("%d", &input[i]);
 bit_stuffing(input, n);
 return 0;
}
</code></pre>
</section>

<section id="p3">
<h2>3. Cyclic Redundancy Check (CRC)</h2>
<pre><code>
#include &lt;stdio.h&gt;
int main() {
 int data[50], div[16], rem[16];
 int datalen = 0, divlen = 0;
 char ch;
 printf("Enter the data (0s and 1s): ");
 while ((ch = getchar()) != '\n')
  data[datalen++] = ch - '0';
 printf("Enter the divisor (0s and 1s): ");
 while ((ch = getchar()) != '\n')
  div[divlen++] = ch - '0';
 for (int i = 0; i < divlen - 1; i++)
  data[datalen + i] = 0;
 for (int i = 0; i < divlen; i++)
  rem[i] = data[i];
 for (int i = divlen; i <= datalen + divlen - 1; i++) {
  if (rem[0] == 1)
   for (int j = 1; j < divlen; j++)
    rem[j - 1] = rem[j] ^ div[j];
  else
   for (int j = 1; j < divlen; j++)
    rem[j - 1] = rem[j];
  rem[divlen - 1] = data[i];
 }
 for (int i = 0; i < divlen - 1; i++)
  data[datalen + i] = rem[i];
 printf("The data to be sent is: ");
 for (int i = 0; i < datalen + divlen - 1; i++)
  printf("%d", data[i]);
 printf("\n");
 return 0;
}
</code></pre>
</section>

<section id="p4">
<h2>4. Frame Sorting Technique</h2>
<pre><code>
#include &lt;stdio.h&gt;
typedef struct {
 int num;
 char str[50];
} Frame;
void sort(Frame arr[], int n) {
 for (int i = 0; i < n - 1; i++)
  for (int j = i + 1; j < n; j++)
   if (arr[i].num > arr[j].num) {
    Frame temp = arr[i];
    arr[i] = arr[j];
    arr[j] = temp;
   }
}
int main() {
 int n;
 printf("Enter number of frames: ");
 scanf("%d", &n);
 Frame arr[n];
 for (int i = 0; i < n; i++) {
  printf("Enter frame number and content: ");
  scanf("%d %s", &arr[i].num, arr[i].str);
 }
 sort(arr, n);
 printf("Sorted frames:\n");
 for (int i = 0; i < n; i++)
  printf("%d\t%s\n", arr[i].num, arr[i].str);
 return 0;
}
</code></pre>
</section>

<section id="p5">
<h2>5. Hamming Code – Error Detection and Correction</h2>
<pre><code>
#include &lt;stdio.h&gt;
int main() {
 int data[7], recv[7];
 int c1, c2, c3, c, i;
 printf("Enter 4 bits of data: ");
 scanf("%d %d %d %d", &data[2], &data[4], &data[5], &data[6]);
 data[0] = data[2] ^ data[4] ^ data[6];
 data[1] = data[2] ^ data[5] ^ data[6];
 data[3] = data[4] ^ data[5] ^ data[6];
 printf("Encoded data: ");
 for (i = 0; i < 7; i++) printf("%d", data[i]);
 printf("\nEnter received 7 bits: ");
 for (i = 0; i < 7; i++) scanf("%d", &recv[i]);
 c1 = recv[0] ^ recv[2] ^ recv[4] ^ recv[6];
 c2 = recv[1] ^ recv[2] ^ recv[5] ^ recv[6];
 c3 = recv[3] ^ recv[4] ^ recv[5] ^ recv[6];
 c = c3 * 4 + c2 * 2 + c1;
 if (c == 0)
  printf("No error detected\n");
 else {
  printf("Error at bit position: %d\n", c);
  recv[c - 1] ^= 1;
  printf("Corrected data: ");
  for (i = 0; i < 7; i++) printf("%d", recv[i]);
 }
 return 0;
}
</code></pre>
</section>

</body>
</html>
